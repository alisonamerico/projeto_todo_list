{% extends 'base.html' %}
{% load bootstrap3 %}

{% block content %}

    <div class="row">
        <div class="col-md-12">

            <h1>Itens</h1>
            <hr>
            {% include 'partials/add_button.html' with link='todo_add' %}

                      <!-- search form -->
              <form class="navbar-form navbar-right" '.' method="get">

                  <input id="search_box" name="search_box" type="text" placeholder="Pesquisar pelo nome"
                         class="form-control">

                  <button type="submit" class="btn btn-primary form-control">
                      <span class="glyphicon glyphicon-search"></span>
                  </button>

                  {% if result %}
                      <a class="btn btn-primary btn-success" href="{% url 'todo_list' %}" role="button">
                          <span class="glyphicon glyphicon-refresh" aria-hidden="true" title="Resetar"></span>
                      </a>
                  {% endif %}

              </form>

                {% if result %}
                    <h3 class="text-success">Resultado da busca: {{ result }} registro(s) com o nome
                        <strong>{{ selection }}</strong></h3>
                {% endif %}

                </div><!-- col-md-12 -->

                <div class="col-md-12 TbMargin">


            {% bootstrap_messages %}

            <table class="table table-hover">
                <thead>
                  <tr>
                      <th>#</th>
                      <th>Atividade</th>
                      <th>Data criada</th>
                      <th>Prioridade</th>
                      <th>Completado</th>
                  </tr>
                </thead>
                <tbody>

                {% for todo in object_list %}
                  <tr>
                      <td>{{ todo.id }}</td>
                      <td>{{ todo.title }}</td>
                      <td>{{ todo.created_date }}</td>
                      <td>{{ todo.priority }}</td>
                      <td>{{ todo.completed }}</td>
                      <td>
                        {% if request.user.is_authenticated %}
                          <a href="{% url 'todo_edit' todo.id %}" class="btn btn-primary btn-sm" role="button">
                              <span class="glyphicon glyphicon-edit" aria-hidden="true" title="Editar"></span>
                          </a>
                          <a href="{% url 'todo_delete' todo.id %}" class="btn btn-primary btn-sm" role="button">
                              <span class="glyphicon glyphicon-trash" aria-hidden="true" title="Deletar"></span>
                          </a>
                        {% endif %}
                      </td>
                  </tr>
                  {% empty %}
                  <tr>
                    <td colspan="7" class="text-center bg-warning">Sem registros...</td>
                  </tr>
                {% endfor %}
                </tbody>
            </table>

              <!-- pagination -->
              {% include 'partials/paginator.html' %}

            </div><!-- col-md-12 -->
    </div><!-- row -->

{% endblock %}

{% block extras_js %}
    <script type="text/javascript">
        $(".alert").show().delay(3000).fadeOut();
    </script>
{% endblock %}
